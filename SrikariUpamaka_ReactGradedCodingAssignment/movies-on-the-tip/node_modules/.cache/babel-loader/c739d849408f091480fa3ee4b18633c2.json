{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SRIKARI\\\\Downloads\\\\DhirajThakre_React-Assignment-Solution-main\\\\DhirajThakre_ReactGradedCodingAssignment\\\\movies-on-the-tip\\\\src\\\\components\\\\moviesList\\\\MoviesList.tsx\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Component } from \"react\";\nimport { Alert, Col, Row } from \"react-bootstrap\";\nimport { getMovies } from \"../../services/movieService\";\nimport LoadingIndicator from \"../common/LoadingIndicator\";\nimport NoMatch from \"../global/NoMatch\";\nimport MovieListItem from \"./MovieListItem\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass MoviesList extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      status: \"LOADING\",\n      searchString: \"\"\n    };\n\n    this.updateValue = event => {\n      const {\n        value\n      } = event.target;\n      this.setState(state => {\n        return {\n          searchString: value\n        };\n      }, () => {\n        this.searchMovie(this.state.searchString);\n      });\n    };\n\n    this.removeMovieFromFavourite = title => {\n      var _this$state$moviesToS;\n\n      this.setState({\n        status: \"LOADING\"\n      });\n      const moviesToShow = (_this$state$moviesToS = this.state.moviesToShow) === null || _this$state$moviesToS === void 0 ? void 0 : _this$state$moviesToS.filter(movie => movie.title !== title);\n      this.setState({\n        status: \"LOADED\",\n        moviesToShow\n      });\n    };\n\n    this.reloadMovieList = async () => {\n      this.setState({\n        status: \"LOADING\"\n      });\n\n      try {\n        const movies = await getMovies(this.props.match.params.moviesCategory);\n        const moviesToShow = movies;\n        this.setState({\n          status: \"LOADED\",\n          movies,\n          moviesToShow\n        });\n      } catch (error) {\n        this.setState({\n          status: \"ERROR\",\n          error: error\n        });\n      }\n    };\n  }\n\n  searchMovie(searchString) {\n    var _this$state$movies;\n\n    this.setState({\n      status: \"LOADING\"\n    });\n    const moviesToShow = (_this$state$movies = this.state.movies) === null || _this$state$movies === void 0 ? void 0 : _this$state$movies.filter(x => {\n      return x.title.toLowerCase().includes(searchString.toLowerCase());\n    });\n    this.setState({\n      status: \"LOADED\",\n      moviesToShow\n    });\n  }\n\n  render() {\n    var _error$message;\n\n    const {\n      status,\n      moviesToShow,\n      error,\n      searchString\n    } = this.state;\n    let el;\n\n    switch (status) {\n      case \"LOADING\":\n        el = /*#__PURE__*/_jsxDEV(LoadingIndicator, {\n          size: \"large\",\n          message: \"Fetching...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 14\n        }, this);\n        break;\n\n      case \"ERROR\":\n        let msg = (_error$message = error === null || error === void 0 ? void 0 : error.message) !== null && _error$message !== void 0 ? _error$message : \"\";\n\n        if ((msg === null || msg === void 0 ? void 0 : msg.indexOf(\"404\")) > -1) {\n          el = /*#__PURE__*/_jsxDEV(NoMatch, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 16\n          }, this);\n        } else {\n          el = /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"danger\",\n            children: error === null || error === void 0 ? void 0 : error.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 16\n          }, this);\n        }\n\n        break;\n\n      case \"LOADED\":\n        el = /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSearch,\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Search movie\",\n              className: \"me-2\",\n              value: searchString,\n              onChange: this.updateValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            xs: 2,\n            md: 3,\n            lg: 5,\n            children: moviesToShow === null || moviesToShow === void 0 ? void 0 : moviesToShow.map((movie, idx) => /*#__PURE__*/_jsxDEV(Col, {\n              className: \"d-flex align-items-stretch my-3\",\n              children: /*#__PURE__*/_jsxDEV(MovieListItem, {\n                movie: movie,\n                path: this.props.match.params.moviesCategory,\n                onRemove: this.removeMovieFromFavourite\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this)\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true);\n        break;\n\n      default:\n        break;\n    }\n\n    return el;\n  }\n\n  async componentDidMount() {\n    await this.reloadMovieList();\n  }\n\n  async componentDidUpdate(prevProps) {\n    if (this.props.match.params.moviesCategory !== prevProps.match.params.moviesCategory) {\n      await this.reloadMovieList();\n    }\n  }\n\n}\n\nexport default MoviesList;","map":{"version":3,"names":["faSearch","FontAwesomeIcon","Component","Alert","Col","Row","getMovies","LoadingIndicator","NoMatch","MovieListItem","MoviesList","state","status","searchString","updateValue","event","value","target","setState","searchMovie","removeMovieFromFavourite","title","moviesToShow","filter","movie","reloadMovieList","movies","props","match","params","moviesCategory","error","x","toLowerCase","includes","render","el","msg","message","indexOf","map","idx","componentDidMount","componentDidUpdate","prevProps"],"sources":["C:/Users/SRIKARI/Downloads/DhirajThakre_React-Assignment-Solution-main/DhirajThakre_ReactGradedCodingAssignment/movies-on-the-tip/src/components/moviesList/MoviesList.tsx"],"sourcesContent":["import { faSearch } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Component } from \"react\";\nimport { Alert, Col, Row, Toast, ToastContainer } from \"react-bootstrap\";\nimport { RouteComponentProps } from \"react-router\";\nimport MovieModel from \"../../model/MovieModel\";\nimport { getMovies } from \"../../services/movieService\";\nimport { isLoading } from \"../../utils/types\";\nimport LoadingIndicator from \"../common/LoadingIndicator\";\nimport NoMatch from \"../global/NoMatch\";\nimport MovieListItem from \"./MovieListItem\";\n\ntype State = {\n  status: isLoading;\n  movies?: MovieModel[];\n  moviesToShow?: MovieModel[];\n  error?: Error;\n  searchString: string;\n};\n\ntype Props = {\n  moviesCategory: string;\n};\n\nclass MoviesList extends Component<RouteComponentProps<Props>, State> {\n  state: State = {\n    status: \"LOADING\",\n    searchString: \"\",\n  };\n\n  updateValue = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { value } = event.target;\n\n    this.setState(\n      (state) => {\n        return {\n          searchString: value,\n        };\n      },\n      () => {\n        this.searchMovie(this.state.searchString);\n      }\n    );\n  };\n\n  searchMovie(searchString: string) {\n    this.setState({\n      status: \"LOADING\",\n    });\n\n    const moviesToShow = this.state.movies?.filter((x) => {\n      return x.title.toLowerCase().includes(searchString.toLowerCase());\n    });\n    this.setState({\n      status: \"LOADED\",\n      moviesToShow,\n    });\n  }\n\n  removeMovieFromFavourite = (title: string) => {\n    this.setState({\n      status: \"LOADING\",\n    });\n\n    const moviesToShow = this.state.moviesToShow?.filter(\n      (movie) => movie.title !== title\n    );\n\n    this.setState({\n      status: \"LOADED\",\n      moviesToShow,\n    });\n  };\n\n  render() {\n    const { status, moviesToShow, error, searchString } = this.state;\n\n    let el;\n\n    switch (status) {\n      case \"LOADING\":\n        el = <LoadingIndicator size=\"large\" message=\"Fetching...\" />;\n        break;\n      case \"ERROR\":\n        let msg = error?.message ?? \"\";\n\n        if (msg?.indexOf(\"404\") > -1) {\n          el = <NoMatch />;\n        } else {\n          el = <Alert variant=\"danger\">{error?.message}</Alert>;\n        }\n        break;\n      case \"LOADED\":\n        el = (\n          <>\n            <div>\n              <FontAwesomeIcon icon={faSearch} className=\"me-2\" />\n              <input\n                placeholder=\"Search movie\"\n                className=\"me-2\"\n                value={searchString}\n                onChange={this.updateValue}\n              />\n            </div>\n            <Row xs={2} md={3} lg={5}>\n              {moviesToShow?.map((movie, idx) => (\n                <Col key={idx} className=\"d-flex align-items-stretch my-3\">\n                  <MovieListItem\n                    movie={movie}\n                    path={this.props.match.params.moviesCategory}\n                    onRemove={this.removeMovieFromFavourite}\n                  />\n                </Col>\n              ))}\n            </Row>\n          </>\n        );\n\n        break;\n      default:\n        break;\n    }\n\n    return el;\n  }\n\n  async componentDidMount() {\n    await this.reloadMovieList();\n  }\n\n  async componentDidUpdate(prevProps: RouteComponentProps<Props>) {\n    if (\n      this.props.match.params.moviesCategory !==\n      prevProps.match.params.moviesCategory\n    ) {\n      await this.reloadMovieList();\n    }\n  }\n\n  reloadMovieList = async () => {\n    this.setState({\n      status: \"LOADING\",\n    });\n\n    try {\n      const movies = await getMovies(this.props.match.params.moviesCategory);\n      const moviesToShow = movies;\n      this.setState({\n        status: \"LOADED\",\n        movies,\n        moviesToShow,\n      });\n    } catch (error) {\n      this.setState({\n        status: \"ERROR\",\n        error: error as Error,\n      });\n    }\n  };\n}\n\nexport default MoviesList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}